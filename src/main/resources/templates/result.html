<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë¹„ë°”ìˆ ì‚¬ - ê²°ê³¼</title>
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
  <style>
    body {
      margin: 0; padding: 0; background-color: #e9ecef;
      font-family: 'Pretendard', sans-serif;
      display: flex; justify-content: center; align-items: center; min-height: 100vh;
    }

    /* ë©”ì¸ ì¹´ë“œ ì»¨í…Œì´ë„ˆ */
    .result-card {
      background: white; width: 90%; max-width: 380px;
      border-radius: 15px; overflow: hidden;
      box-shadow: 0 10px 25px rgba(0,0,0,0.15);
      margin: 20px 0;
      position: relative;
    }

    /* ìƒë‹¨ í—¤ë” (ë³´ë¼ìƒ‰) */
    .card-header {
      background-color: #5B36AC; color: white;
      text-align: center; padding: 15px; font-weight: bold; font-size: 16px;
    }

    /* ë³¸ë¬¸ ì˜ì—­ */
    .card-body { padding: 30px 20px; text-align: center; }

    /* ë©”ì¸ ë©”ì‹œì§€ */
    .main-message {
      font-size: 20px; font-weight: 800; color: #333;
      line-height: 1.5; margin-bottom: 25px; word-break: keep-all;
    }

    /* ë¯¿ìŒ íƒœê·¸  */
    .belief-tag {
      display: inline-block; background-color: #f3f0ff; color: #5B36AC;
      padding: 8px 15px; border-radius: 8px; font-size: 14px; font-weight: 600;
      margin-bottom: 10px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .belief-tag:hover { background-color: #e0d4fc; }

    /* ìˆ¨ê²¨ì§„ ì˜ë¯¸ ë°•ìŠ¤ */
    .belief-detail-box {
      display: none;
      background-color: #f8f9fa;
      border: 1px solid #eee;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 30px;
      text-align: left;
      font-size: 13px;
      line-height: 1.6;
      color: #555;
      animation: slideDown 0.3s ease-out;
    }
    .belief-detail-item { margin-bottom: 8px; }
    .belief-label { font-weight: bold; color: #5B36AC; margin-right: 5px; }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ìƒê°í•´ë³´ê¸° ì„¹ì…˜ */
    .section-title { font-size: 14px; color: #888; margin-bottom: 10px; font-weight: bold; }
    .question-text {
      font-size: 16px; color: #444; margin-bottom: 30px; word-break: keep-all;
    }

    /* í–‰ìš´í…œ ë°•ìŠ¤ (ë…¸ë€ìƒ‰) */
    .lucky-box {
      background-color: #fff9db; color: #444;
      padding: 15px; border-radius: 10px; font-weight: bold;
      margin-bottom: 30px;
    }
    .lucky-icon { margin-right: 5px; color: #2ecc71; }

    /* ëŒ“ê¸€(ì†Œê°) ì˜ì—­ */
    .comment-section {
      border-top: 1px solid #eee; padding: 20px; text-align: left;
      background-color: #fafafa;
    }
    .comment-title {
      font-size: 13px; font-weight: bold; color: #666; margin-bottom: 10px;
      display: flex; align-items: center; gap: 5px;
    }
    .empty-comment { font-size: 12px; color: #aaa; margin-bottom: 15px; }

    /* ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ */
    .input-group { display: flex; gap: 5px; }
    .comment-input {
      flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-size: 13px;
    }
    .btn-submit {
      background-color: #333; color: white; border: none;
      padding: 0 15px; border-radius: 5px; font-size: 13px; cursor: pointer;
    }
  </style>
</head>
<body>

<div class="result-card">
  <div class="card-header">ì˜¤ëŠ˜ì˜ ë¹„ë°”ìˆ ì‚¬ ê³„ì‹œ</div>

  <div class="card-body">
    <div class="main-message" th:text="${fortune.message}">
      ë‚¨ë“¤ì€ ë§ˆì¹¨í‘œë¥¼ ì°ì„ ë•Œ ë‹¹ì‹ ì€<br>ë¬¼ìŒí‘œë¥¼ ë˜ì§€ëŠ” í•˜ë£¨ì…ë‹ˆë‹¤.
    </div>

    <div class="belief-tag" onclick="toggleBelief()">
      ğŸ“Œ <span th:text="${fortune.belief.title}">ë‹¹ì—°í•œ ê²ƒë„ ë‚¯ì„¤ê²Œ ë³¸ë‹¤</span> ğŸ”½
    </div>

    <div id="beliefDetail" class="belief-detail-box">
      <div class="belief-detail-item">
        <span class="belief-label">[ì˜ë¯¸]</span>
        <span th:text="${fortune.belief.meaning}">ë‚¨ë“¤ì´ ë³´ì§€ ëª»í•˜ëŠ”...</span>
      </div>
    </div>

    <div class="section-title">ğŸ¤” ìƒê°í•´ë³´ê¸°</div>
    <div class="question-text" th:text="${fortune.question}">
      ì˜¤ëŠ˜ 'ì™œ?'ë¼ëŠ” ì§ˆë¬¸ì„ ëª‡ ë²ˆ í•˜ì…¨ë‚˜ìš”?
    </div>

    <div class="lucky-box">
      <span class="lucky-icon">ğŸ€</span> í–‰ìš´í…œ: <span th:text="${fortune.luckyItem}">ë¬¼ìŒí‘œ ìŠ¤í‹°ì»¤</span>
    </div>
  </div>

  <div class="comment-section">
    <div class="comment-title">ğŸ’¬ '<span th:text="${fortune.belief.title}"></span>' ë™ë£Œë“¤ì˜ í•œë§ˆë””</div>

    <div class="empty-comment" th:if="${#lists.isEmpty(comments)}">
      ì˜¤ëŠ˜ í•˜ë£¨, ì´ ë¯¿ìŒì„ ì–´ë–»ê²Œ ì‹¤ì²œí•´ë³¼ê¹Œìš”?
    </div>

    <ul th:if="${!#lists.isEmpty(comments)}" style="list-style: none; padding: 0; margin-bottom: 15px;">
      <li th:each="comment : ${comments}" style="font-size: 13px; margin-bottom: 5px; color: #444;">
        â€¢ <span th:text="${comment.content}">ì†Œê° ë‚´ìš©</span>
      </li>
    </ul>

    <form action="/fortune/comment" method="post" class="input-group">
      <input type="hidden" name="beliefId" th:value="${fortune.belief.id}">
      <input type="text" name="content" class="comment-input" placeholder="ì†Œê°ì„ ë‚¨ê²¨ì£¼ì„¸ìš” (30ì ì´ë‚´)">
      <button type="submit" class="btn-submit">ë“±ë¡</button>
    </form>
  </div>
</div>

<script>
  // íƒœê·¸ í´ë¦­ ì‹œ ì„¤ëª… ë°•ìŠ¤ë¥¼ ê»ë‹¤ ì¼°ë‹¤ í•˜ëŠ” í•¨ìˆ˜
  function toggleBelief() {
    var box = document.getElementById("beliefDetail");
    if (box.style.display === "none" || box.style.display === "") {
      box.style.display = "block"; // ë³´ì´ê¸°
    } else {
      box.style.display = "none";
    }
  }
</script>

</body>
</html>